(function(e){function t(t){for(var n,u,o=t[0],i=t[1],s=t[2],d=0,b=[];d<o.length;d++)u=o[d],Object.prototype.hasOwnProperty.call(a,u)&&a[u]&&b.push(a[u][0]),a[u]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(b.length)b.shift()();return c.push.apply(c,s||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,u=1;u<r.length;u++){var i=r[u];0!==a[i]&&(n=!1)}n&&(c.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},c=[];function u(e){return o.p+"js/"+({Category:"Category",Forum:"Forum",Home:"Home",NotFound:"NotFound",Profile:"Profile",Register:"Register",SignIn:"SignIn",ThreadCreate:"ThreadCreate",ThreadEdit:"ThreadEdit",ThreadShow:"ThreadShow"}[e]||e)+"."+{Category:"ef1b0541",Forum:"a61424e6",Home:"9e67aa7c",NotFound:"c265bc39",Profile:"ed45bdd0",Register:"b902ceb3",SignIn:"d7fe4490",ThreadCreate:"452f8b6e",ThreadEdit:"85f40707",ThreadShow:"a0e8708e"}[e]+".js"}function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var c,i=document.createElement("script");i.charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.src=u(e);var s=new Error;c=function(t){i.onerror=i.onload=null,clearTimeout(d);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+n+": "+c+")",s.name="ChunkLoadError",s.type=n,s.request=c,r[1](s)}a[e]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:i})}),12e4);i.onerror=i.onload=c,document.head.appendChild(i)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var l=s;c.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"08b7":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("c740"),r("a434");var n=r("7a23"),a=Object(n["B"])([]),c=function(e){var t=e.message,r=e.timeout,n=void 0===r?null:r,c=e.type,o=void 0===c?"info":c,i=Math.random()+Date.now();a.push({id:i,message:t,type:o}),n&&setTimeout((function(){return u(i)}),n)},u=function(e){var t=a.findIndex((function(t){return t.id===e}));a.splice(t,1)};function o(){return{notifications:a,addNotification:c,removeNotification:u}}},"1aea":function(e,t,r){e.exports=r.p+"img/arrow-profile.38f6985b.svg"},"1fda":function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a=Object(n["X"])("data-v-8abd8d38"),c=a((function(e,t,r,a,c,u){return Object(n["x"])(),Object(n["f"])("span",{title:u.humanFriendlyDate},Object(n["K"])(u.diffForHumans),9,["title"])})),u=(r("a9e3"),r("5a0c")),o=r.n(u),i=r("4208"),s=r.n(i),d=r("23ad"),l=r.n(d);o.a.extend(s.a),o.a.extend(l.a);var b={props:{timestamp:{required:!0,type:[Number,Object]}},computed:{normalizedTimestamp:function(){var e;return(null===(e=this.timestamp)||void 0===e?void 0:e.seconds)||this.timestamp},diffForHumans:function(){return o.a.unix(this.normalizedTimestamp).fromNow()},humanFriendlyDate:function(){return o.a.unix(this.normalizedTimestamp).format("llll")}}};b.render=c,b.__scopeId="data-v-8abd8d38";t["default"]=b},"26c3":function(e,t,r){"use strict";r.r(t);var n=r("5530"),a=r("552e"),c=Object(n["a"])(Object(n["a"])({},a["a"]),{},{name:"AppHead"});t["default"]=c},"28a1":function(e,t,r){},"28ee":function(e,t,r){e.exports=r.p+"img/vueschool-logo.f438c98e.svg"},"2a42":function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a=Object(n["X"])("data-v-6312caac");Object(n["A"])("data-v-6312caac");var c={class:"sk-circle"},u=Object(n["i"])('<div class="sk-circle1 sk-child" data-v-6312caac></div><div class="sk-circle2 sk-child" data-v-6312caac></div><div class="sk-circle3 sk-child" data-v-6312caac></div><div class="sk-circle4 sk-child" data-v-6312caac></div><div class="sk-circle5 sk-child" data-v-6312caac></div><div class="sk-circle6 sk-child" data-v-6312caac></div><div class="sk-circle7 sk-child" data-v-6312caac></div><div class="sk-circle8 sk-child" data-v-6312caac></div><div class="sk-circle9 sk-child" data-v-6312caac></div><div class="sk-circle10 sk-child" data-v-6312caac></div><div class="sk-circle11 sk-child" data-v-6312caac></div><div class="sk-circle12 sk-child" data-v-6312caac></div>',12);Object(n["y"])();var o=a((function(e,t,r,a,o,i){return Object(n["x"])(),Object(n["f"])("div",c,[u])})),i={props:{color:{type:String,default:"#263959"}},data:function(){return{spinnerColor:this.color}}},s=function(){Object(n["O"])((function(e){return{"080f56e8-spinnerColor":e.spinnerColor}}))},d=i.setup;i.setup=d?function(e,t){return s(),d(e,t)}:s;var l=i;r("3789");l.render=o,l.__scopeId="data-v-6312caac";t["default"]=l},"321a":function(e,t,r){},"36b4":function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a=Object(n["X"])("data-v-0dc2912a");Object(n["A"])("data-v-0dc2912a");var c={class:"notifications"};Object(n["y"])();var u=a((function(e,t,r,u,o,i){return Object(n["x"])(),Object(n["f"])("div",c,[Object(n["k"])(n["c"],{name:"notification"},{default:a((function(){return[(Object(n["x"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(u.notifications,(function(e){return Object(n["x"])(),Object(n["f"])("div",{class:["notification","notification-type-".concat(e.type)],key:e.id},[Object(n["k"])("span",null,Object(n["K"])(e.message),1),Object(n["k"])("button",{onClick:function(t){return u.removeNotification(e.id)}},"x",8,["onClick"])],2)})),128))]})),_:1})])})),o=r("08b7"),i={setup:function(){var e=Object(o["a"])(),t=e.notifications,r=e.removeNotification;return{notifications:t,removeNotification:r}}};r("dac0");i.render=u,i.__scopeId="data-v-0dc2912a";t["default"]=i},3789:function(e,t,r){"use strict";r("321a")},"4be4":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("4160"),r("b0c0"),r("d3b7"),r("ac1f"),r("5319"),r("159b"),r("ddb0"),r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),a=(r("99af"),Object(n["k"])("title",null,"Vue.js 3 Master Class Forum",-1)),c=Object(n["k"])("meta",{name:"description",content:"An awesome Vue.js 3 powered forum!"},null,-1),u=Object(n["k"])("meta",{property:"og:title",content:"Vue.js 3 Master Class Forum"},null,-1),o=Object(n["k"])("meta",{property:"og:description",content:"An Awesome Vue.js 3 powered forum!"},null,-1),i=Object(n["k"])("meta",{property:"og:image",content:"https://vueschool.io/media/f007f6057444d9a7f567163391d2b366/vuejs-3-master-class-not-transparent.jpg"},null,-1),s=Object(n["k"])("meta",{name:"twitter:title",content:"Vue.js 3 Master Class Forum"},null,-1),d=Object(n["k"])("meta",{name:"twitter:description",content:"An Awesome Vue.js 3 powered forum!"},null,-1),l=Object(n["k"])("meta",{name:"twitter:image",content:"https://vueschool.io/media/f007f6057444d9a7f567163391d2b366/vuejs-3-master-class-not-transparent.jpg"},null,-1),b=Object(n["k"])("meta",{name:"twitter:card",content:"summary_large_image"},null,-1),m={class:"container"};function f(e,t,r,f,p,h){var j=Object(n["F"])("AppHead"),v=Object(n["F"])("the-navbar"),O=Object(n["F"])("router-view"),g=Object(n["F"])("AppSpinner"),k=Object(n["F"])("AppNotifications");return Object(n["x"])(),Object(n["f"])(n["a"],null,[Object(n["k"])(j,null,{default:Object(n["T"])((function(){return[a,c,u,o,i,s,d,l,b]})),_:1}),Object(n["k"])(v),Object(n["k"])("div",m,[Object(n["U"])(Object(n["k"])(O,{onReady:h.onPageReady,key:"".concat(e.$route.path).concat(JSON.stringify(e.$route.query))},null,8,["onReady"]),[[n["P"],p.showPage]]),Object(n["U"])(Object(n["k"])(g,null,null,512),[[n["P"],!p.showPage]]),Object(n["k"])(k)])],64)}var p=r("5530"),h=r("28ee"),j=r.n(h),v=r("1aea"),O=r.n(v),g=Object(n["X"])("data-v-ebb5f2a4");Object(n["A"])("data-v-ebb5f2a4");var k={class:"header",id:"header"},w=Object(n["k"])("img",{src:j.a},null,-1),x=Object(n["k"])("div",{class:"top bar"},null,-1),I=Object(n["k"])("div",{class:"middle bar"},null,-1),y=Object(n["k"])("div",{class:"bottom bar"},null,-1),A={key:0,class:"navbar-user"},U=Object(n["k"])("img",{class:"icon-profile",src:O.a,alt:""},null,-1),T=Object(n["k"])("div",{class:"triangle-drop"},null,-1),R={class:"dropdown-menu"},_={class:"dropdown-menu-item"},P=Object(n["j"])("View profile"),S={class:"dropdown-menu-item"},C={key:1,class:"navbar-item"},F=Object(n["j"])("Sign In"),E={key:2,class:"navbar-item"},N=Object(n["j"])("Register"),q={key:3,class:"navbar-mobile-item"},M=Object(n["j"])("View Profile"),H={key:4,class:"navbar-mobile-item"};Object(n["y"])();var V=g((function(e,t,r,a,c,u){var o=Object(n["F"])("router-link"),i=Object(n["F"])("AppAvatarImg"),s=Object(n["G"])("click-outside"),d=Object(n["G"])("page-scroll");return Object(n["U"])((Object(n["x"])(),Object(n["f"])("header",k,[Object(n["k"])(o,{to:{name:"Home"},class:"logo"},{default:g((function(){return[w]})),_:1}),Object(n["k"])("div",{class:"btn-hamburger",onClick:t[1]||(t[1]=function(e){return c.mobileNavMenu=!c.mobileNavMenu})},[x,I,y]),Object(n["k"])("nav",{class:["navbar",{"navbar-open":c.mobileNavMenu}]},[Object(n["k"])("ul",null,[e.authUser?(Object(n["x"])(),Object(n["f"])("li",A,[Object(n["U"])(Object(n["k"])("a",{onClick:t[2]||(t[2]=Object(n["W"])((function(e){return c.userDropdownOpen=!c.userDropdownOpen}),["prevent"]))},[Object(n["k"])(i,{class:"avatar-small",src:e.authUser.avatar,alt:"".concat(e.authUser.name," profile picture")},null,8,["src","alt"]),Object(n["k"])("span",null,[Object(n["j"])(Object(n["K"])(e.authUser.name)+" ",1),U])],512),[[s,function(){return c.userDropdownOpen=!1}]]),Object(n["k"])("div",{id:"user-dropdown",class:{"active-drop":c.userDropdownOpen}},[T,Object(n["k"])("ul",R,[Object(n["k"])("li",_,[Object(n["k"])(o,{to:{name:"Profile"}},{default:g((function(){return[P]})),_:1})]),Object(n["k"])("li",S,[Object(n["k"])("a",{onClick:t[3]||(t[3]=Object(n["W"])((function(t){return e.$store.dispatch("auth/signOut"),e.$router.push({name:"Home"})}),["prevent"]))}," Sign Out ")])])],2)])):Object(n["g"])("",!0),e.authUser?Object(n["g"])("",!0):(Object(n["x"])(),Object(n["f"])("li",C,[Object(n["k"])(o,{to:{name:"SignIn"}},{default:g((function(){return[F]})),_:1})])),e.authUser?Object(n["g"])("",!0):(Object(n["x"])(),Object(n["f"])("li",E,[Object(n["k"])(o,{to:{name:"Register"}},{default:g((function(){return[N]})),_:1})])),e.authUser?(Object(n["x"])(),Object(n["f"])("li",q,[Object(n["k"])(o,{to:{name:"Profile"}},{default:g((function(){return[M]})),_:1})])):Object(n["g"])("",!0),e.authUser?(Object(n["x"])(),Object(n["f"])("li",H,[Object(n["k"])("a",{onClick:t[4]||(t[4]=Object(n["W"])((function(t){return e.$store.dispatch("auth/signOut"),e.$router.push({name:"Home"})}),["prevent"]))}," Sign Out")])):Object(n["g"])("",!0)])],2)],512)),[[s,function(){return c.mobileNavMenu=!1}],[d,function(){return c.mobileNavMenu=!1}]])})),$=r("5502"),D={data:function(){return{userDropdownOpen:!1,mobileNavMenu:!1}},computed:Object(p["a"])({},Object($["c"])("auth",["authUser"])),created:function(){var e=this;this.$router.beforeEach((function(t,r){e.mobileNavMenu=!1}))}};D.render=V,D.__scopeId="data-v-ebb5f2a4";var L=D,B=r("323e"),G=r.n(B),W=r("36b4"),X={name:"App",components:{TheNavbar:L,AppNotifications:W["default"]},data:function(){return{showPage:!1}},methods:Object(p["a"])(Object(p["a"])({},Object($["b"])("auth",["fetchAuthUser"])),{},{onPageReady:function(){this.showPage=!0,G.a.done()}}),created:function(){var e=this;this.fetchAuthUser(),G.a.configure({speed:200,showSpinner:!1}),this.$router.beforeEach((function(){e.showPage=!1,G.a.start()}))}};r("97ce");X.render=f;var z=X,K=(r("1276"),r("96cf"),r("1da1")),J=r("6c02"),Q=r("ce96"),Y={},Z=(r("d81d"),r("3ca3"),r("260b")),ee=r("e71f"),te=r("588e"),re=r("d940"),ne=r.n(re),ae=r("ea7b"),ce=Object(Z["a"])(ne.a),ue=Object(ee["f"])(ce),oe=Object(te["b"])(ce),ie=Object(ae["d"])(),se={fetchItem:function(e,t){var r=e.state,n=e.commit,a=t.id,c=t.resource,u=t.handleUnsubscribe,o=void 0===u?null:u,i=t.once,s=void 0!==i&&i,d=t.callBack,l=void 0===d?null:d;return new Promise((function(e){var t=Object(ee["c"])(ue,c,a),u=Object(ee["i"])(t,(function(t){if(s&&u(),t.exists()){var o=Object(p["a"])(Object(p["a"])({},t.data()),{},{id:t.id}),i=Object(Q["c"])(r[c].items,a);if(i=i?Object(p["a"])({},i):null,n("setItem",{resource:c,item:o}),"function"===typeof l){var d=t.metadata.hasPendingWrites;l({item:Object(p["a"])({},o),previousItem:i,isLocal:d})}e(o)}else e(null)}));o?o(u):n("appendUnsubscribe",{unsubscribe:u})}))},fetchItems:function(e,t){var r=e.dispatch,n=t.ids,a=t.resource,c=t.emoji,u=t.callBack,o=void 0===u?null:u;return n=n||[],Promise.all(n.map((function(e){return r("fetchItem",{id:e,resource:a,emoji:c,callBack:o})})))},unsubscribeAllSnapshots:function(e){return Object(K["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.state,n=e.commit,r.unsubscribes.forEach((function(e){return e()})),n("clearAllUnsubscribes");case 3:case"end":return t.stop()}}),t)})))()},clearItems:function(e,t){var r=e.commit,n=t.modules,a=void 0===n?[]:n;r("clearItems",{modules:a})}},de={setItem:function(e,t){var r=t.resource,n=t.item;Object(Q["g"])(e[r].items,Object(Q["b"])(n))},appendUnsubscribe:function(e,t){var r=t.unsubscribe;e.unsubscribes.push(r)},clearAllUnsubscribes:function(e){e.unsubscribes=[]},clearItems:function(e,t){var r=t.modules,n=void 0===r?[]:r;n.forEach((function(t){e[t].items=[]}))}},le={namespaced:!0,state:{items:[]},getters:{},actions:{fetchCategory:Object(Q["e"])({emoji:"🏷",resource:"categories"}),fetchCategories:Object(Q["f"])({emoji:"🏷",resource:"categories"}),fetchAllCategories:function(e){var t=e.commit;return new Promise((function(e){Object(ee["e"])(Object(ee["b"])(ue,"categories")).then((function(r){var n=r.docs.map((function(e){var r=Object(p["a"])({id:e.id},e.data());return t("setItem",{resource:"categories",item:r},{root:!0}),r}));e(n)}))}))}},mutations:{}},be={namespaced:!0,state:{items:[]},getters:{},actions:{fetchForum:Object(Q["e"])({emoji:"🏁",resource:"forums"}),fetchForums:Object(Q["f"])({emoji:"🏁",resource:"forums"})},mutations:{appendThreadToForum:Object(Q["d"])({parent:"forums",child:"threads"})}},me=r("91c8"),fe=r.n(me),pe={namespaced:!0,state:{items:[]},getters:{thread:function(e,t,r){return function(t){var n=Object(Q["c"])(e.items,t);return n?Object(p["a"])(Object(p["a"])({},n),{},{get author(){return Object(Q["c"])(r.users.items,n.userId)},get repliesCount(){return n.posts.length-1},get contributorsCount(){return n.contributors?n.contributors.length:0}}):{}}}},actions:{createThread:function(e,t){return Object(K["a"])(regeneratorRuntime.mark((function r(){var n,a,c,u,o,i,s,d,l,b,m,f,h,j,v;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,c=e.dispatch,u=e.rootState,o=t.text,i=t.title,s=t.forumId,d=u.auth.authId,l=Object(ee["l"])(),b=Object(ee["c"])(Object(ee["b"])(ue,"threads")),m={forumId:s,title:i,publishedAt:l,userId:d,id:b.id},f=Object(ee["c"])(ue,"users",d),h=Object(ee["c"])(ue,"forums",s),j=Object(ee["q"])(ue),j.set(b,m),j.update(f,{threads:Object(ee["a"])(b.id)}),j.update(h,{threads:Object(ee["a"])(b.id)}),r.next=14,j.commit();case 14:return r.next=16,Object(ee["d"])(b);case 16:return v=r.sent,n("setItem",{resource:"threads",item:Object(p["a"])(Object(p["a"])({},v.data()),{},{id:v.id})},{root:!0}),n("users/appendThreadToUser",{parentId:d,childId:b.id},{root:!0}),n("forums/appendThreadToForum",{parentId:s,childId:b.id},{root:!0}),r.next=22,c("posts/createPost",{text:o,threadId:b.id,firstInThread:!0},{root:!0});case 22:return r.abrupt("return",Object(Q["c"])(a.items,b.id));case 23:case"end":return r.stop()}}),r)})))()},updateThread:function(e,t){return Object(K["a"])(regeneratorRuntime.mark((function r(){var n,a,c,u,o,i,s,d,l,b,m,f,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,c=e.rootState,u=t.title,o=t.text,i=t.id,s=Object(Q["c"])(a.items,i),d=Object(Q["c"])(c.posts.items,s.posts[0]),l=Object(p["a"])(Object(p["a"])({},s),{},{title:u}),b=Object(p["a"])(Object(p["a"])({},d),{},{text:o}),m=Object(ee["c"])(ue,"threads",i),f=Object(ee["c"])(ue,"posts",d.id),h=Object(ee["q"])(ue),h.update(m,l),h.update(f,b),r.next=13,h.commit();case 13:return r.next=15,Object(ee["d"])(m);case 15:return l=r.sent,r.next=18,Object(ee["d"])(f);case 18:return b=r.sent,n("setItem",{resource:"threads",item:l},{root:!0}),n("setItem",{resource:"posts",item:b},{root:!0}),r.abrupt("return",Object(Q["b"])(l));case 22:case"end":return r.stop()}}),r)})))()},fetchThread:Object(Q["e"])({emoji:"📄",resource:"threads"}),fetchThreads:Object(Q["f"])({emoji:"📄",resource:"threads"}),fetchThreadsByPage:function(e,t){var r=e.dispatch,n=e.commit,a=t.ids,c=t.page,u=t.perPage,o=void 0===u?10:u;n("clearThreads");var i=fe()(a,o),s=i[c-1];return r("fetchThreads",{ids:s})}},mutations:{appendPostToThread:Object(Q["d"])({parent:"threads",child:"posts"}),appendContributorToThread:Object(Q["d"])({parent:"threads",child:"contributors"}),clearThreads:function(e){e.items=[]}}},he={namespaced:!0,state:{items:[]},getters:{},actions:{createPost:function(e,t){return Object(K["a"])(regeneratorRuntime.mark((function r(){var n,a,c,u,o,i,s,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,a=e.rootState,t.userId=a.auth.authId,t.publishedAt=Object(ee["l"])(),t.firstInThread=t.firstInThread||!1,c=Object(ee["q"])(ue),u=Object(ee["c"])(Object(ee["b"])(ue,"posts")),o=Object(ee["c"])(ue,"threads",t.threadId),i=Object(ee["c"])(ue,"users",a.auth.authId),c.set(u,t),s={posts:Object(ee["a"])(u.id)},t.firstInThread||(s.contributors=Object(ee["a"])(a.auth.authId)),c.update(o,s),c.update(i,{postsCount:Object(ee["g"])(1)}),r.next=15,c.commit();case 15:return r.next=17,Object(ee["d"])(u);case 17:d=r.sent,n("setItem",{resource:"posts",item:Object(p["a"])(Object(p["a"])({},d.data()),{},{id:d.id})},{root:!0}),n("threads/appendPostToThread",{childId:d.id,parentId:t.threadId},{root:!0}),t.firstInThread||n("threads/appendContributorToThread",{childId:a.auth.authId,parentId:t.threadId},{root:!0});case 21:case"end":return r.stop()}}),r)})))()},updatePost:function(e,t){return Object(K["a"])(regeneratorRuntime.mark((function r(){var n,a,c,u,o,i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,a=e.rootState,c=t.text,u=t.id,o={text:c,edited:{at:Object(ee["l"])(),by:a.auth.authId,moderated:!1}},i=Object(ee["c"])(ue,"posts",u),r.next=6,Object(ee["o"])(i,o);case 6:return r.next=8,Object(ee["d"])(i);case 8:s=r.sent,n("setItem",{resource:"posts",item:s},{root:!0});case 10:case"end":return r.stop()}}),r)})))()},fetchPost:Object(Q["e"])({emoji:"💬",resource:"posts"}),fetchPosts:Object(Q["f"])({emoji:"💬",resource:"posts"})},mutations:{}},je=(r("4de4"),{namespaced:!0,state:{items:[]},getters:{user:function(e,t,r){return function(t){var n=Object(Q["c"])(e.items,t);return n?Object(p["a"])(Object(p["a"])({},n),{},{get posts(){return r.posts.items.filter((function(e){return e.userId===n.id}))},get postsCount(){return n.postsCount||0},get threads(){return r.threads.items.filter((function(e){return e.userId===n.id}))},get threadIds(){return n.threads},get threadsCount(){var e;return(null===(e=n.threads)||void 0===e?void 0:e.length)||0}}):null}}},actions:{createUser:function(e,t){return Object(K["a"])(regeneratorRuntime.mark((function r(){var n,a,c,u,o,i,s,d,l,b,m,f;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.id,c=t.email,u=t.name,o=t.username,i=t.avatar,s=void 0===i?null:i,d=Object(ee["l"])(),l=o.toLowerCase(),c=c.toLowerCase(),b={avatar:s,email:c,name:u,username:o,usernameLower:l,registeredAt:d},m=Object(ee["c"])(ue,"users",a),r.next=9,Object(ee["m"])(m,b);case 9:return r.next=11,Object(ee["d"])(m);case 11:return f=r.sent,n("setItem",{resource:"users",item:f},{root:!0}),r.abrupt("return",Object(Q["b"])(f));case 14:case"end":return r.stop()}}),r)})))()},updateUser:function(e,t){return Object(K["a"])(regeneratorRuntime.mark((function r(){var n,a,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a={avatar:t.avatar||null,username:t.username||null,name:t.name||null,bio:t.bio||null,website:t.website||null,email:t.email||null,location:t.location||null},c=Object(ee["c"])(ue,"users",t.id),r.next=5,Object(ee["o"])(c,a);case 5:n("setItem",{resource:"users",item:t},{root:!0});case 6:case"end":return r.stop()}}),r)})))()},fetchUser:Object(Q["e"])({emoji:"🙋",resource:"users"}),fetchUsers:Object(Q["f"])({resource:"users",emoji:"🙋"})},mutations:{appendThreadToUser:Object(Q["d"])({parent:"users",child:"threads"})}}),ve=r("2909"),Oe=r("08b7"),ge={namespaced:!0,state:{authId:null,authUserUnsubscribe:null,authObserverUnsubscribe:null},getters:{authUser:function(e,t,r,n){return n["users/user"](e.authId)}},actions:{updateEmail:function(e,t){return Object(K["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.state,n=t.email,r.abrupt("return",Object(ae["h"])(ie.currentUser,n));case 3:case"end":return r.stop()}}),r)})))()},reauthenticate:function(e,t){return Object(K["a"])(regeneratorRuntime.mark((function r(){var n,a,c,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.state,n=t.email,a=t.password,r.prev=2,c=ae["a"].credential(n,a),u=ie.currentUser,r.next=7,Object(ae["e"])(u,c);case 7:r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](2),console.log({error:r.t0});case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()},initAuthentication:function(e){var t=this,r=(e.dispatch,e.commit),n=e.state;return n.authObserverUnsubscribe&&n.authObserverUnsubscribe(),new Promise((function(e){var n=ie.onAuthStateChanged(function(){var r=Object(K["a"])(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.dispatch("auth/unsubscribeAuthUserSnapshot"),!n){r.next=7;break}return r.next=4,t.dispatch("auth/fetchAuthUser");case 4:e(n),r.next=8;break;case 7:e(null);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());r("setAuthObserverUnsubscribe",n)}))},registerUserWithEmailAndPassword:function(e,t){return Object(K["a"])(regeneratorRuntime.mark((function r(){var n,a,c,u,o,i,s,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,a=t.avatar,c=void 0===a?null:a,u=t.email,o=t.name,i=t.username,s=t.password,r.next=4,Object(ae["c"])(ie,u,s);case 4:return d=r.sent,r.next=7,n("uploadAvatar",{authId:d.user.uid,file:c});case 7:return c=r.sent,r.next=10,n("users/createUser",{id:d.user.uid,email:u,name:o,username:i,avatar:c},{root:!0});case 10:case"end":return r.stop()}}),r)})))()},uploadAvatar:function(e,t){return Object(K["a"])(regeneratorRuntime.mark((function r(){var n,a,c,u,o,i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.state,a=t.authId,c=t.file,u=t.filename,c){r.next=4;break}return r.abrupt("return",null);case 4:return a=a||n.authId,u=u||c.name,r.prev=6,o=Object(te["c"])(oe,"uploads/".concat(a,"/images/").concat(Date.now(),"-").concat(u)),r.abrupt("return",Object(te["d"])(o,c).then((function(e){return Object(te["a"])(o)})));case 11:r.prev=11,r.t0=r["catch"](6),i=Object(Oe["a"])(),s=i.addNotification,s({message:"Error uploading avatar image",type:"error"});case 15:case"end":return r.stop()}}),r,null,[[6,11]])})))()},signInWithEmailAndPassword:function(e,t){var r=t.email,n=t.password;return Object(ae["f"])(ie,r,n)},signInWithGoogle:function(e){return Object(K["a"])(regeneratorRuntime.mark((function t(){var r,n,a,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.dispatch,t.prev=1,n=new ae["b"],t.next=5,Object(ae["g"])(ie,n);case 5:if(a=t.sent,c=a.user,u=Object(ee["c"])(ue,"users",c.uid),u.exists){t.next=10;break}return t.abrupt("return",r("users/createUser",{id:c.uid,name:c.displayName,email:c.email,username:c.email,avatar:c.photoURL},{root:!0}));case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),alert(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()},signOut:function(e){return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,ie.signOut();case 3:r("setAuthId",null);case 4:case"end":return t.stop()}}),t)})))()},fetchAuthUser:function(){var e=Object(K["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dispatch,t.state,a=t.commit,c=null===(r=ie.currentUser)||void 0===r?void 0:r.uid,c){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n("fetchItem",{emoji:"🙋",resource:"users",id:c,handleUnsubscribe:function(e){a("setAuthUserUnsubscribe",e)}},{root:!0});case 6:a("setAuthId",c);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),fetchAuthUsersPosts:function(e,t){return Object(K["a"])(regeneratorRuntime.mark((function r(){var n,a,c,u,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.commit,a=e.state,c=t.lastPost,r.t0=Object(ee["b"])(ue,"posts"),r.t1=Object(ee["p"])("userId","==",a.authId),r.t2=Object(ee["j"])("publishedAt","desc"),!c){r.next=13;break}return r.t4=ee["n"],r.next=9,Object(ee["d"])(Object(ee["c"])(ue,"posts",c.id));case 9:r.t5=r.sent,r.t3=(0,r.t4)(r.t5),r.next=14;break;case 13:r.t3=null;case 14:return r.t6=r.t3,r.t7=Object(ee["h"])(10),u=[r.t0,r.t1,r.t2,r.t6,r.t7].filter((function(e){return null!==e})),o=ee["k"].apply(void 0,Object(ve["a"])(u)),r.next=20,Object(ee["e"])(o);case 20:i=r.sent,i.forEach((function(e){n("setItem",{resource:"posts",item:e},{root:!0})}));case 22:case"end":return r.stop()}}),r)})))()},unsubscribeAuthUserSnapshot:function(e){return Object(K["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.state,n=e.commit,r.authUserUnsubscribe&&(r.authUserUnsubscribe(),n("setAuthUserUnsubscribe",null));case 2:case"end":return t.stop()}}),t)})))()}},mutations:{setAuthId:function(e,t){e.authId=t},setAuthUserUnsubscribe:function(e,t){e.authUserUnsubscribe=t},setAuthObserverUnsubscribe:function(e,t){e.authObserverUnsubscribe=t}}},ke=Object($["a"])({modules:{categories:le,forums:be,threads:pe,posts:he,users:je,auth:ge},state:{unsubscribes:[]},getters:Y,actions:se,mutations:de}),we=[{path:"/",name:"Home",component:function(){return r.e("Home").then(r.bind(null,"bc13"))}},{path:"/me",name:"Profile",component:function(){return r.e("Profile").then(r.bind(null,"2ff9"))},meta:{toTop:!0,smoothScroll:!0,requiresAuth:!0}},{path:"/me/edit",name:"ProfileEdit",component:function(){return r.e("Profile").then(r.bind(null,"2ff9"))},props:{edit:!0},meta:{requiresAuth:!0}},{path:"/category/:id",name:"Category",component:function(){return r.e("Category").then(r.bind(null,"5d64"))},props:!0},{path:"/forum/:id",name:"Forum",component:function(){return r.e("Forum").then(r.bind(null,"038d"))},props:!0},{path:"/thread/:id",name:"ThreadShow",component:function(){return r.e("ThreadShow").then(r.bind(null,"8f3b"))},props:!0,beforeEnter:function(e,t,r){return Object(K["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ke.dispatch("threads/fetchThread",{id:e.params.id,once:!0});case 2:if(n=Object(Q["c"])(ke.state.threads.items,e.params.id),!n){t.next=7;break}return t.abrupt("return",r());case 7:r({name:"NotFound",params:{pathMatch:e.path.substring(1).split("/")},query:e.query,hash:e.hash});case 8:case"end":return t.stop()}}),t)})))()}},{path:"/forum/:forumId/thread/create",name:"ThreadCreate",component:function(){return r.e("ThreadCreate").then(r.bind(null,"6a1b"))},props:!0,meta:{requiresAuth:!0}},{path:"/thread/:id/edit",name:"ThreadEdit",component:function(){return r.e("ThreadEdit").then(r.bind(null,"6997"))},props:!0,meta:{requiresAuth:!0}},{path:"/register",name:"Register",component:function(){return r.e("Register").then(r.bind(null,"56b4"))},meta:{requiresGuest:!0}},{path:"/signin",name:"SignIn",component:function(){return r.e("SignIn").then(r.bind(null,"4fc8"))},meta:{requiresGuest:!0}},{path:"/logout",name:"SignOut",beforeEnter:function(e,t){return Object(K["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ke.dispatch("auth/signOut");case 2:return e.abrupt("return",{name:"Home"});case 3:case"end":return e.stop()}}),e)})))()}},{path:"/:pathMatch(.*)*",name:"NotFound",component:function(){return r.e("NotFound").then(r.bind(null,"aa4b"))}}],xe=Object(J["a"])({history:Object(J["b"])(),routes:we,scrollBehavior:function(e){var t={};return e.meta.toTop&&(t.top=0),e.meta.smoothScroll&&(t.behavior="smooth"),t}});xe.afterEach((function(){ke.dispatch("clearItems",{modules:["categories","forums","posts","threads"]})})),xe.beforeEach(function(){var e=Object(K["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ke.dispatch("auth/initAuthentication");case 2:if(ke.dispatch("unsubscribeAllSnapshots"),!t.meta.requiresAuth||ke.state.auth.authId){e.next=5;break}return e.abrupt("return",{name:"SignIn",query:{redirectTo:t.path}});case 5:if(!t.meta.requiresGuest||!ke.state.auth.authId){e.next=7;break}return e.abrupt("return",{name:"Home"});case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());var Ie=xe,ye=r("ecee"),Ae=r("c074"),Ue=r("ad3d");ye["c"].add(Ae["b"],Ae["a"]);var Te=function(e){e.component("fa",Ue["a"])},Re={mounted:function(e,t){e.__ClickOutsideHandler__=function(r){e===r.target||e.contains(r.target)||t.value(r)},document.body.addEventListener("click",e.__ClickOutsideHandler__)},unmounted:function(e){document.body.removeEventListener("click",e.__ClickOutsideHandler__)}},_e=function(e){e.directive("click-outside",Re)},Pe=r("b047"),Se=r.n(Pe),Ce={mounted:function(e,t){e.__PageScroll__=Se()((function(){t.value()}),200,{leading:!0}),document.addEventListener("scroll",e.__PageScroll__)},unmounted:function(e){document.removeEventListener("scroll",e.__PageScroll__)}},Fe=function(e){e.directive("page-scroll",Ce)},Ee=r("2967"),Ne=(r("42d8"),function(e){e.component("VPagination",Ee["a"])}),qe=r("3835"),Me=r("7bb1"),He=r("3aa8"),Ve=r("cbdf"),$e=function(e){Object(Me["e"])("required",He["c"]),Object(Me["e"])("email",He["a"]),Object(Me["e"])("min",He["b"]),Object(Me["e"])("url",He["d"]),Object(Me["e"])("unique",function(){var e=Object(K["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,c,u,o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Array.isArray(r)?(u=Object(qe["a"])(r,3),n=u[0],a=u[1],c=u[2]):(n=r.coll,a=r.field,c=r.excluding),t!==c){e.next=3;break}return e.abrupt("return",!0);case 3:return o=[Object(ee["b"])(ue,n),Object(ee["p"])(a,"==",t)],i=ee["k"].apply(void 0,o),e.next=7,Object(ee["e"])(i);case 7:return s=e.sent,e.abrupt("return",s.empty);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Object(Me["d"])({generateMessage:Object(Ve["a"])("en",{messages:{required:"{field} is required",email:"{field} must be a valid email",min:"{field} must be a minimum of 0:{min} characters",unique:"{field} is already taken",url:"{field} must be a valid URL"}})}),e.component("VeeForm",Me["c"]),e.component("VeeField",Me["b"]),e.component("VeeErrorMessage",Me["a"])},De=r("552e"),Le=Object(n["e"])(z);Le.use(Ie),Le.use(ke),Le.use(Te),Le.use(_e),Le.use(Fe),Le.use(Ne),Le.use($e),Le.use(Object(De["b"])());var Be=r("d1be");Be.keys().forEach((function(e){var t=Be(e);t=t.default||t;var r=t.name||e.replace(/^.+\//,"").replace(/\.\w+$/,"");Le.component(r,t)})),Le.mount("#app")},"7ad0":function(e,t,r){"use strict";r("7c82")},"7b02":function(e,t,r){},"7c82":function(e,t,r){},"97ce":function(e,t,r){"use strict";r("28a1")},a38a:function(e,t,r){"use strict";r.r(t);r("b0c0");var n=r("7a23"),a={class:"form-group"};function c(e,t,r,c,u,o){var i=Object(n["F"])("VeeField"),s=Object(n["F"])("VeeErrorMessage");return Object(n["x"])(),Object(n["f"])("div",a,[Object(n["k"])("label",{for:r.name},Object(n["K"])(r.label),9,["for"]),Object(n["k"])(i,Object(n["q"])({name:r.name,label:r.label,modelValue:r.modelValue,onInput:t[1]||(t[1]=function(t){return e.$emit("modelUpdate",t)}),id:r.name,class:"form-input"},e.$attrs),null,16,["name","label","modelValue","id"]),Object(n["k"])(s,{name:r.name,class:"form-error"},null,8,["name"])])}var u={inheritAttrs:!1,props:{name:{type:String,required:!0},label:{type:String,default:""},modelValue:{type:String,default:""}}};u.render=c;t["default"]=u},c35a:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a=Object(n["X"])("data-v-0b37e3e6");Object(n["A"])("data-v-0b37e3e6");var c={class:"inersection-observer"};Object(n["y"])();var u=a((function(e,t,r,a,u,o){return Object(n["x"])(),Object(n["f"])("div",c)})),o=(r("4160"),r("159b"),{props:{done:{type:Boolean,default:!1}},data:function(){return{observer:null}},mounted:function(){var e=this;this.observer=new IntersectionObserver((function(t,r){t.forEach((function(t){t.isIntersecting&&e.$emit("load")}))}),{root:null,rootMargin:"0px",threshold:.9}),this.observer.observe(this.$el)},unmounted:function(){this.observer.unobserve(this.$el)},watch:{done:function(){this.done&&this.observer.unobserve(this.$el)}}});r("d13c");o.render=u,o.__scopeId="data-v-0b37e3e6";t["default"]=o},cc97:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a=Object(n["X"])("data-v-b4630a2c"),c=a((function(e,t,r,a,c,u){return Object(n["x"])(),Object(n["f"])("img",{src:r.src||"/user-placeholder.png"},null,8,["src"])})),u={props:{src:{type:String}}};r("7ad0");u.render=c,u.__scopeId="data-v-b4630a2c";t["default"]=u},ce96:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"g",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return i})),r.d(t,"f",(function(){return s})),r.d(t,"a",(function(){return d}));r("99af"),r("7db0"),r("c740"),r("caad"),r("2532");var n=r("5530"),a=function(e,t){return e?e.find((function(e){return e.id===t})):null},c=function(e,t){var r=e.findIndex((function(e){return e.id===t.id}));t.id&&-1!==r?e[r]=t:e.push(t)},u=function(e){return"function"!==typeof(null===e||void 0===e?void 0:e.data)?e:Object(n["a"])(Object(n["a"])({},e.data()),{},{id:e.id})},o=function(e){var t=e.parent,r=e.child;return function(e,n){var c=n.childId,u=n.parentId,o=a(e.items,u);o?(o[r]=o[r]||[],o[r].includes(c)||o[r].push(c)):console.warn("Appending ".concat(r," ").concat(c," to ").concat(t," ").concat(u," failed because the parent didn't exist"))}},i=function(e){var t=e.emoji,r=e.resource;return function(e,a){var c=e.dispatch;return c("fetchItem",Object(n["a"])({emoji:t,resource:r},a),{root:!0})}},s=function(e){var t=e.emoji,r=e.resource;return function(e,a){var c=e.dispatch;return c("fetchItems",Object(n["a"])({emoji:t,resource:r},a),{root:!0})}},d=function(e){var t=Math.floor(Math.random()*e.length);return e[t]}},d13c:function(e,t,r){"use strict";r("7b02")},d1be:function(e,t,r){var n={"./AppAvatarImg.vue":"cc97","./AppDate.vue":"1fda","./AppFormField.vue":"a38a","./AppHead.vue":"26c3","./AppInfiniteScroll.vue":"c35a","./AppNotifications.vue":"36b4","./AppSpinner.vue":"2a42"};function a(e){var t=c(e);return r(t)}function c(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=c,e.exports=a,a.id="d1be"},d940:function(e,t){e.exports={apiKey:"AIzaSyBe-nQUeiCAaIJzQR_ixuGe1rX49y_w6RA",authDomain:"vue-school-forum-26d06.firebaseapp.com",projectId:"vue-school-forum-26d06",databaseURL:"https://vue-school-forum-19467.firebaseio.com",storageBucket:"vue-school-forum-26d06.appspot.com",messagingSenderId:"70304250296",appId:"1:70304250296:web:b2c0a4be2527da7454f74d"}},dac0:function(e,t,r){"use strict";r("4be4")}});
//# sourceMappingURL=app.e66d4433.js.map