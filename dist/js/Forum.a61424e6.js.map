{"version":3,"sources":["webpack:///./src/pages/Forum.vue","webpack:///./src/components/ThreadList.vue","webpack:///./src/components/ThreadList.vue?9633","webpack:///./src/pages/Forum.vue?da71","webpack:///./src/mixins/asyncDataStatus.js"],"names":["class","asyncDataStatus_ready","forum","name","property","content","description","to","id","threads","page","pages","totalPages","active-color","href","style","length","thread","key","title","userById","userId","timestamp","publishedAt","repliesCount","src","avatar","props","type","Array","required","computed","posts","this","$store","state","items","users","methods","postById","postId","render","__scopeId","components","ThreadList","mixins","asyncDataStatus","String","data","parseInt","$route","query","perPage","forums","filter","forumId","map","getters","threadCount","Math","ceil","created","fetchForum","fetchThreadsByPage","ids","fetchUsers","asyncDataStatus_fetched","watch","$router","push","$emit"],"mappings":"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","file":"js/Forum.a61424e6.js","sourcesContent":["<template>\n<div v-if=\"asyncDataStatus_ready\" class=\"col-full\">\n  <div v-if=\"forum\" class=\"col-full push-top\">\n    <AppHead>\n      <title>{{forum?.name}}</title>\n      <meta property=\"og:title\" :content=\"forum?.name\">\n      <meta name=\"twitter:title\" :content=\"forum?.name\">\n    </AppHead>\n    <div class=\"forum-header\">\n      <div class=\"forum-details\">\n        <h1>{{ forum.name }}</h1>\n        <p class=\"text-lead\">{{ forum.description }}</p>\n      </div>\n      <router-link\n        :to=\"{name:'ThreadCreate', params: {forumId: forum.id}}\"\n        class=\"btn-green btn-small\"\n      >\n        Start a thread\n      </router-link>\n    </div>\n  </div>\n\n  <div class=\"col-full push-top\">\n    <ThreadList :threads=\"threads\"/>\n    <v-pagination\n    v-model=\"page\"\n    :pages=\"totalPages\"\n    active-color=\"#57AD8D\"\n  />\n  </div>\n</div>\n</template>\n\n<script>\nimport ThreadList from '@/components/ThreadList'\nimport { findById } from '@/helpers'\nimport { mapActions } from 'vuex'\nimport asyncDataStatus from '@/mixins/asyncDataStatus'\nexport default {\n  components: { ThreadList },\n  mixins: [asyncDataStatus],\n  props: {\n    id: {\n      required: true,\n      type: String\n    }\n  },\n  data () {\n    return {\n      page: parseInt(this.$route.query.page) || 1,\n      perPage: 10\n    }\n  },\n  computed: {\n    forum () {\n      return findById(this.$store.state.forums.items, this.id)\n    },\n    threads () {\n      if (!this.forum) return []\n      return this.$store.state.threads.items\n        .filter(thread => thread.forumId === this.forum.id)\n        .map(thread => this.$store.getters['threads/thread'](thread.id))\n    },\n    threadCount () {\n      return this.forum.threads?.length || 0\n    },\n    totalPages () {\n      if (!this.threadCount) return 0\n      return Math.ceil(this.threadCount / this.perPage)\n    }\n  },\n  methods: {\n    ...mapActions('forums', ['fetchForum']),\n    ...mapActions('threads', ['fetchThreadsByPage']),\n    ...mapActions('users', ['fetchUsers'])\n  },\n  async created () {\n    const forum = await this.fetchForum({ id: this.id })\n    const threads = await this.fetchThreadsByPage({ ids: forum.threads, page: this.page, perPage: this.perPage })\n    await this.fetchUsers({ ids: threads.map(thread => thread.userId) })\n    this.asyncDataStatus_fetched()\n  },\n  watch: {\n    async page (page) {\n      this.$router.push({ query: { page: this.page } })\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","<template>\n  <div class=\"col-full\">\n    <div class=\"thread-list\">\n\n      <h2 class=\"list-title\">Threads</h2>\n\n      <div v-if=\"threads.length\">\n        <div v-for=\"thread in threads\" :key=\"thread.id\" class=\"thread\">\n          <div>\n            <p>\n              <router-link :to=\"{name: 'ThreadShow', params: {id: thread.id}}\">{{ thread.title }}</router-link>\n            </p>\n            <p class=\"text-faded text-xsmall\">\n              By <a href=\"#\">{{ userById(thread.userId).name }}</a>, <AppDate :timestamp=\"thread.publishedAt\" />.\n            </p>\n          </div>\n\n          <div class=\"activity\">\n            <p class=\"replies-count\">\n            {{ thread.repliesCount }} replies\n            </p>\n\n            <AppAvatarImg class=\"avatar-medium\" :src=\"userById(thread.userId).avatar\" />\n\n            <div>\n              <p class=\"text-xsmall\">\n                <a href=\"#\">{{ userById(thread.userId).name }}</a>\n              </p>\n              <p class=\"text-xsmall text-faded\"><AppDate :timestamp=\"thread.publishedAt\" /></p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"!threads.length\" style=\"padding:10px; text-align: center;\">\n      <em>No Threads Available</em>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { findById } from '@/helpers'\nexport default {\n  props: {\n    threads: {\n      type: Array,\n      required: true\n    }\n  },\n  computed: {\n    posts () {\n      return this.$store.state.posts.items\n    },\n    users () {\n      return this.$store.state.users.items\n    }\n  },\n  methods: {\n    postById (postId) {\n      return findById(this.posts, postId)\n    },\n    userById (userId) {\n      return findById(this.users, userId) || {}\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import { render } from \"./ThreadList.vue?vue&type=template&id=4f03f21e&scoped=true\"\nimport script from \"./ThreadList.vue?vue&type=script&lang=js\"\nexport * from \"./ThreadList.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-4f03f21e\"\n\nexport default script","import { render } from \"./Forum.vue?vue&type=template&id=352e3a63&scoped=true\"\nimport script from \"./Forum.vue?vue&type=script&lang=js\"\nexport * from \"./Forum.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-352e3a63\"\n\nexport default script","export default {\n  data () {\n    return {\n      asyncDataStatus_ready: false\n    }\n  },\n  methods: {\n    asyncDataStatus_fetched () {\n      this.asyncDataStatus_ready = true\n      this.$emit('ready')\n    }\n  }\n}\n"],"sourceRoot":""}