{"version":3,"sources":["webpack:///./src/pages/ThreadCreate.vue","webpack:///./src/pages/ThreadCreate.vue?d2fd","webpack:///./src/mixins/asyncDataStatus.js","webpack:///./src/components/ThreadEditor.vue","webpack:///./src/components/ThreadEditor.vue?0909"],"names":["class","asyncDataStatus_ready","forum","name","save","cancel","formIsDirty","components","ThreadEditor","mixins","asyncDataStatus","props","forumId","type","String","required","data","computed","this","$store","state","forums","items","methods","title","text","createThread","id","thread","$router","push","params","created","fetchForum","asyncDataStatus_fetched","beforeRouteLeave","confirmed","window","confirm","render","$emit","label","form","rules","as","rows","cols","existing","default","watch","handler","deep"],"mappings":"0JACoCA,MAAM,qB,iBAClC,0B,oEADK,EAAAC,uB,iBAAX,eAMM,MANN,EAMM,CALJ,eAEK,W,EADkB,eAAuB,wBAAjB,EAAAC,MAAMC,MAAI,KAGvC,eAAsG,GAAvF,OAAM,EAAAC,KAAO,SAAQ,EAAAC,OAAS,QAAK,+BAAE,EAAAC,aAAW,IAAU,QAAK,+BAAE,EAAAA,aAAW,K,6IAQhF,GACbC,WAAY,CAAEC,eAAA,MACdC,OAAQ,CAACC,EAAA,MACTC,MAAO,CACLC,QAAS,CAAEC,KAAMC,OAAQC,UAAU,IAErCC,KANa,WAOX,MAAO,CACLV,aAAa,IAGjBW,SAAU,CACRf,MADQ,WAEN,OAAO,eAASgB,KAAKC,OAAOC,MAAMC,OAAOC,MAAOJ,KAAKN,WAGzDW,QAAS,gDACJ,eAAW,SAAU,CAAC,gBACtB,eAAW,UAAW,CAAC,kBAFrB,IAGCnB,KAHC,SAAF,GAGwB,yKAAfoB,EAAe,EAAfA,MAAOC,EAAQ,EAARA,KAAQ,SACN,EAAKC,aAAa,CACrCd,QAAS,EAAKV,MAAMyB,GACpBH,QACAC,SAJyB,OACrBG,EADqB,OAM3B,EAAKC,QAAQC,KAAK,CAAE3B,KAAM,aAAc4B,OAAQ,CAAEJ,GAAIC,EAAOD,MANlC,8CAQ7BtB,OAXO,WAYLa,KAAKW,QAAQC,KAAK,CAAE3B,KAAM,QAAS4B,OAAQ,CAAEJ,GAAIT,KAAKhB,MAAMyB,SAG1DK,QA/BO,WA+BI,wKACT,EAAKC,WAAW,CAAEN,GAAI,EAAKf,UADlB,OAEf,EAAKsB,0BAFU,8CAIjBC,iBAnCa,WAoCX,GAAIjB,KAAKZ,YAAa,CACpB,IAAM8B,EAAYC,OAAOC,QAAQ,iEACjC,IAAKF,EAAW,OAAO,KCjD7B,EAAOG,OAASA,EAED,gB,kCCLA,QACbvB,KADa,WAEX,MAAO,CACLf,uBAAuB,IAG3BsB,QAAS,CACPW,wBADO,WAELhB,KAAKjB,uBAAwB,EAC7BiB,KAAKsB,MAAM,a,qDCJRxC,MAAM,a,GAEDA,MAAM,eAAea,KAAK,SAASV,KAAK,W,iHANpD,eAUU,GAVA,SAAQ,EAAAC,MAAI,C,wBACpB,iBAAiF,CAAjF,eAAiF,GAAnEqC,MAAM,QAAQtC,KAAK,Q,WAAiB,EAAAuC,KAAKlB,M,qDAAL,EAAAkB,KAAKlB,MAAK,IAAEmB,MAAM,Y,uBACpE,eAAmH,GAArGC,GAAG,WAAWH,MAAM,UAAUtC,KAAK,O,WAAgB,EAAAuC,KAAKjB,K,qDAAL,EAAAiB,KAAKjB,KAAI,IAAEkB,MAAM,WAAWE,KAAK,IAAIC,KAAK,O,uBAE3G,eAKM,MALN,EAKM,CAJJ,eAA8E,UAArE,QAAK,+CAAU,EAAAN,MAAK,0BAAYxC,MAAM,iBAAgB,UAC/D,eAES,SAFT,EAES,eADL,EAAA+C,SAAQ,6B,qCAOH,GACbpC,MAAO,CACLa,MAAO,CAAEX,KAAMC,OAAQkC,QAAS,IAChCvB,KAAM,CAAEZ,KAAMC,OAAQkC,QAAS,KAEjChC,KALa,WAMX,MAAO,CACL0B,KAAM,CACJlB,MAAON,KAAKM,MACZC,KAAMP,KAAKO,QAIjBR,SAAU,CACR8B,SADQ,WAEN,QAAS7B,KAAKM,QAGlBD,QAAS,CACPnB,KADO,WAELc,KAAKsB,MAAM,SACXtB,KAAKsB,MAAM,OAAX,kBAAwBtB,KAAKwB,SAGjCO,MAAO,CACLP,KAAM,CACJQ,QADI,WAEEhC,KAAKwB,KAAKlB,QAAUN,KAAKM,OAASN,KAAKwB,KAAKjB,OAASP,KAAKO,KAC5DP,KAAKsB,MAAM,SAEXtB,KAAKsB,MAAM,UAGfW,MAAM,KC7CZ,EAAOZ,OAASA,EAED","file":"js/ThreadCreate.452f8b6e.js","sourcesContent":["<template>\n  <div v-if=\"asyncDataStatus_ready\" class=\"col-full push-top\">\n    <h1>\n      Create new thread in <i>{{ forum.name }}</i>\n    </h1>\n\n    <ThreadEditor @save=\"save\" @cancel=\"cancel\" @dirty=\"formIsDirty = true\" @clean=\"formIsDirty = false\"/>\n  </div>\n</template>\n<script>\nimport ThreadEditor from '@/components/ThreadEditor'\nimport { findById } from '@/helpers'\nimport { mapActions } from 'vuex'\nimport asyncDataStatus from '@/mixins/asyncDataStatus'\nexport default {\n  components: { ThreadEditor },\n  mixins: [asyncDataStatus],\n  props: {\n    forumId: { type: String, required: true }\n  },\n  data () {\n    return {\n      formIsDirty: false\n    }\n  },\n  computed: {\n    forum () {\n      return findById(this.$store.state.forums.items, this.forumId)\n    }\n  },\n  methods: {\n    ...mapActions('forums', ['fetchForum']),\n    ...mapActions('threads', ['createThread']),\n    async save ({ title, text }) {\n      const thread = await this.createThread({\n        forumId: this.forum.id,\n        title,\n        text\n      })\n      this.$router.push({ name: 'ThreadShow', params: { id: thread.id } })\n    },\n    cancel () {\n      this.$router.push({ name: 'Forum', params: { id: this.forum.id } })\n    }\n  },\n  async created () {\n    await this.fetchForum({ id: this.forumId })\n    this.asyncDataStatus_fetched()\n  },\n  beforeRouteLeave () {\n    if (this.formIsDirty) {\n      const confirmed = window.confirm('Are you sure you want to leave? Unsaved changes will be lost!')\n      if (!confirmed) return false\n    }\n  }\n}\n</script>\n","import { render } from \"./ThreadCreate.vue?vue&type=template&id=f2a03866\"\nimport script from \"./ThreadCreate.vue?vue&type=script&lang=js\"\nexport * from \"./ThreadCreate.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","export default {\n  data () {\n    return {\n      asyncDataStatus_ready: false\n    }\n  },\n  methods: {\n    asyncDataStatus_fetched () {\n      this.asyncDataStatus_ready = true\n      this.$emit('ready')\n    }\n  }\n}\n","<template>\n  <VeeForm @submit=\"save\">\n    <AppFormField label=\"Title\" name=\"title\" v-model=\"form.title\" rules=\"required\" />\n    <AppFormField as=\"textarea\" label=\"Content\" name=\"text\" v-model=\"form.text\" rules=\"required\" rows=\"8\" cols=\"140\" />\n\n    <div class=\"btn-group\">\n      <button @click.prevent=\"$emit('cancel')\" class=\"btn btn-ghost\">Cancel</button>\n      <button class=\"btn btn-blue\" type=\"submit\" name=\"Publish\">\n        {{existing ? 'Update' : 'Publish'}}\n      </button>\n    </div>\n  </VeeForm>\n</template>\n\n<script>\nexport default {\n  props: {\n    title: { type: String, default: '' },\n    text: { type: String, default: '' }\n  },\n  data () {\n    return {\n      form: {\n        title: this.title,\n        text: this.text\n      }\n    }\n  },\n  computed: {\n    existing () {\n      return !!this.title\n    }\n  },\n  methods: {\n    save () {\n      this.$emit('clean')\n      this.$emit('save', { ...this.form })\n    }\n  },\n  watch: {\n    form: {\n      handler () {\n        if (this.form.title !== this.title || this.form.text !== this.text) {\n          this.$emit('dirty')\n        } else {\n          this.$emit('clean')\n        }\n      },\n      deep: true\n    }\n  }\n}\n</script>\n","import { render } from \"./ThreadEditor.vue?vue&type=template&id=0103a24e\"\nimport script from \"./ThreadEditor.vue?vue&type=script&lang=js\"\nexport * from \"./ThreadEditor.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}