(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ThreadCreate"],{"6a1b":function(t,e,r){"use strict";r.r(e);r("b0c0");var n=r("7a23"),a={key:0,class:"col-full push-top"},i=Object(n["j"])(" Create new thread in ");function c(t,e,r,c,u,o){var s=Object(n["F"])("ThreadEditor");return t.asyncDataStatus_ready?(Object(n["x"])(),Object(n["f"])("div",a,[Object(n["k"])("h1",null,[i,Object(n["k"])("i",null,Object(n["K"])(o.forum.name),1)]),Object(n["k"])(s,{onSave:o.save,onCancel:o.cancel,onDirty:e[1]||(e[1]=function(t){return u.formIsDirty=!0}),onClean:e[2]||(e[2]=function(t){return u.formIsDirty=!1})},null,8,["onSave","onCancel"])])):Object(n["g"])("",!0)}r("96cf");var u=r("1da1"),o=r("5530"),s=r("fc02"),l=r("ce96"),f=r("5502"),d=r("cae2"),m={components:{ThreadEditor:s["a"]},mixins:[d["a"]],props:{forumId:{type:String,required:!0}},data:function(){return{formIsDirty:!1}},computed:{forum:function(){return Object(l["c"])(this.$store.state.forums.items,this.forumId)}},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(f["b"])("forums",["fetchForum"])),Object(f["b"])("threads",["createThread"])),{},{save:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.title,a=t.text,r.next=3,e.createThread({forumId:e.forum.id,title:n,text:a});case 3:i=r.sent,e.$router.push({name:"ThreadShow",params:{id:i.id}});case 5:case"end":return r.stop()}}),r)})))()},cancel:function(){this.$router.push({name:"Forum",params:{id:this.forum.id}})}}),created:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchForum({id:t.forumId});case 2:t.asyncDataStatus_fetched();case 3:case"end":return e.stop()}}),e)})))()},beforeRouteLeave:function(){if(this.formIsDirty){var t=window.confirm("Are you sure you want to leave? Unsaved changes will be lost!");if(!t)return!1}}};m.render=c;e["default"]=m},cae2:function(t,e,r){"use strict";e["a"]={data:function(){return{asyncDataStatus_ready:!1}},methods:{asyncDataStatus_fetched:function(){this.asyncDataStatus_ready=!0,this.$emit("ready")}}}},fc02:function(t,e,r){"use strict";var n=r("7a23"),a={class:"btn-group"},i={class:"btn btn-blue",type:"submit",name:"Publish"};function c(t,e,r,c,u,o){var s=Object(n["F"])("AppFormField"),l=Object(n["F"])("VeeForm");return Object(n["x"])(),Object(n["f"])(l,{onSubmit:o.save},{default:Object(n["T"])((function(){return[Object(n["k"])(s,{label:"Title",name:"title",modelValue:u.form.title,"onUpdate:modelValue":e[1]||(e[1]=function(t){return u.form.title=t}),rules:"required"},null,8,["modelValue"]),Object(n["k"])(s,{as:"textarea",label:"Content",name:"text",modelValue:u.form.text,"onUpdate:modelValue":e[2]||(e[2]=function(t){return u.form.text=t}),rules:"required",rows:"8",cols:"140"},null,8,["modelValue"]),Object(n["k"])("div",a,[Object(n["k"])("button",{onClick:e[3]||(e[3]=Object(n["W"])((function(e){return t.$emit("cancel")}),["prevent"])),class:"btn btn-ghost"},"Cancel"),Object(n["k"])("button",i,Object(n["K"])(o.existing?"Update":"Publish"),1)])]})),_:1},8,["onSubmit"])}var u=r("5530"),o={props:{title:{type:String,default:""},text:{type:String,default:""}},data:function(){return{form:{title:this.title,text:this.text}}},computed:{existing:function(){return!!this.title}},methods:{save:function(){this.$emit("clean"),this.$emit("save",Object(u["a"])({},this.form))}},watch:{form:{handler:function(){this.form.title!==this.title||this.form.text!==this.text?this.$emit("dirty"):this.$emit("clean")},deep:!0}}};o.render=c;e["a"]=o}}]);
//# sourceMappingURL=ThreadCreate.452f8b6e.js.map